<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Ajax2-请求Json数据</title>
</head>

<body>
	
	<button id="but1">请求单个用户</button>
	<button id="but2">请求所有用户</button>
	
	<br><br>
	<h3>单个用户</h3>
	<div id="user"></div>
	
	<br><br>
	<h3>所有用户</h3>
	<div id="users"></div>
	
<script>

document.getElementById('but1').addEventListener('click',text1);
document.getElementById('but2').addEventListener('click',text2);

function text1(){
	var ajx = new XMLHttpRequest();
	ajx.open('get','user.json',true);
	ajx.send();
	ajx.onload=function(){
		if(this.status==200){

			var user=JSON.parse(this.responseText)
			
			var oli='';
			oli +=`
				<ul>
					<li>${user.id}</li>
					<li>${user.name}</li>
					<li>${user.email}</li>
				</ul>
			`;
			document.getElementById('user').innerHTML=oli;
			
			
		}else{
			
			document.getElementById('user').innerHTML="数据未显示！"; 
		}
	}
	
	
}

function text2(){
	var ajx = new XMLHttpRequest();
	ajx.open('get','users.json',true);
	ajx.send();
	ajx.onload=function(){
		if(this.status==200){

			var users=JSON.parse(this.responseText)
			
			var oli='';
			//遍历数组
			for(var i in users){
				oli +=`
					<ul>
						<li>${users.id}</li>
						<li>${users.name}</li>
						<li>${users.email}</li>
					</ul>
				`;
			}

			document.getElementById('users').innerHTML=oli;
			
		}else{
			
			document.getElementById('user').innerHTML="数据未显示！"; 
		}
	}
}

</script>
	
	
	
</body>
</html>
